import{o as V,a as W,i as X}from"./lifecycle.CNpOP9us.js";import{p as Z,a as tt,g as a,m as et,r as o,s as at,c as n,b as g,u as l,t as U,d as P}from"./runtime.3ZiL6AbN.js";import{f as E,a as A,s as h}from"./render.brZyvLxj.js";import{e as j,i as F}from"./each.B29bUDJO.js";import{p as rt,s as $,i as M}from"./translation.Bs2K9wjt.js";import{I as L}from"./zh_CN.BkAviufo.js";import{g as N}from"./url-utils._Bd2Y9f-.js";var it=E(`<a class="group btn-plain !block h-10 w-full rounded-lg hover:text-[initial]"><div class="flex flex-row justify-start items-center h-full"><div class="w-[15%] md:w-[10%] transition text-sm text-right text-50"> </div> <div class="w-[15%] md:w-[10%] relative dash-line h-full flex items-center"><div class="transition-all mx-auto w-1 h-1 rounded group-hover:h-5
                       bg-[oklch(0.5_0.05_var(--hue))] group-hover:bg-[var(--primary)]
                       outline outline-4 z-50
                       outline-[var(--card-bg)]
                       group-hover:outline-[var(--btn-plain-bg-hover)]
                       group-active:outline-[var(--btn-plain-bg-active)]"></div></div> <div class="w-[70%] md:max-w-[65%] md:w-[65%] text-left font-bold
                     group-hover:translate-x-1 transition-all group-hover:text-[var(--primary)]
                     text-75 pr-8 whitespace-nowrap overflow-ellipsis overflow-hidden"> </div> <div class="hidden md:block md:w-[15%] text-left text-sm transition
                     whitespace-nowrap overflow-ellipsis overflow-hidden text-30"> </div></div></a>`),st=E(`<div><div class="flex flex-row w-full items-center h-[3.75rem]"><div class="w-[15%] md:w-[10%] transition text-2xl font-bold text-right text-75"> </div> <div class="w-[15%] md:w-[10%]"><div class="h-3 w-3 bg-none rounded-full outline outline-[var(--primary)] mx-auto
                  -outline-offset-[2px] z-50 outline-3"></div></div> <div class="w-[70%] md:w-[80%] transition text-left text-50"> </div></div> <!></div>`),ot=E('<div class="card-base px-8 py-6"></div>');function ht(B,k){tt(k,!1);let G=rt(k,"sortedPosts",24,()=>[]),m=[],w=[],D=null,I=et([]);function K(r){const t=typeof r=="string"?new Date(r):r,v=(t.getMonth()+1).toString().padStart(2,"0"),u=t.getDate().toString().padStart(2,"0");return`${v}-${u}`}function O(r){return r.map(t=>`#${t}`).join(" ")}function d(){const r=new URLSearchParams(window.location.search);m=r.has("tag")?r.getAll("tag"):[],w=r.has("category")?r.getAll("category"):[],D=r.get("uncategorized");let t=G();m.length>0&&(t=t.filter(e=>Array.isArray(e.data.tags)&&e.data.tags.some(i=>m.includes(i)))),w.length>0&&(t=t.filter(e=>e.data.category&&w.includes(e.data.category))),D&&(t=t.filter(e=>!e.data.category));const v=t.reduce((e,i)=>{const c=(typeof i.data.published=="string"?new Date(i.data.published):i.data.published).getFullYear();return e[c]||(e[c]=[]),e[c].push(i),e},{}),u=Object.keys(v).map(e=>({year:Number.parseInt(e,10),posts:v[Number.parseInt(e,10)]}));u.sort((e,i)=>i.year-e.year),at(I,u)}V(async()=>{d(),window.addEventListener("popstate",d),window.addEventListener("hashchange",d),window.addEventListener("tagFilterChanged",d),setInterval(()=>{const r=window.location.href;r!==S&&(S=r,d())},1e3)});let S=window.location.href;W(()=>{window.removeEventListener("popstate",d),window.removeEventListener("hashchange",d),window.removeEventListener("tagFilterChanged",d)}),X();var p=ot();j(p,5,()=>a(I),F,(r,t)=>{var v=st(),u=n(v),e=n(u),i=n(e,!0);o(e);var x=g(e,4),c=n(x);o(x),o(u);var R=g(u,2);j(R,1,()=>(a(t),l(()=>a(t).posts)),F,(b,s)=>{var f=it(),z=n(f),y=n(z),T=n(y,!0);o(y);var _=g(y,4),Y=n(_,!0);o(_);var C=g(_,2),q=n(C,!0);o(C),o(z),o(f),U((H,J,Q)=>{$(f,"href",H),$(f,"aria-label",(a(s),l(()=>a(s).data.title))),h(T,J),h(Y,(a(s),l(()=>a(s).data.title))),h(q,Q)},[()=>(P(N),a(s),l(()=>N(a(s).slug))),()=>(a(s),l(()=>K(a(s).data.published))),()=>(a(s),l(()=>O(a(s).data.tags)))]),A(b,f)}),o(v),U(b=>{h(i,(a(t),l(()=>a(t).year))),h(c,`${a(t),l(()=>a(t).posts.length)??""} ${b??""}`)},[()=>(P(M),a(t),P(L),l(()=>M(a(t).posts.length===1?L.postCount:L.postsCount)))]),A(r,v)}),o(p),A(B,p),Z()}export{ht as default};
