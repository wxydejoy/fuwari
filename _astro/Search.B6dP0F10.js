import{o as Z,i as ee}from"./lifecycle.CNpOP9us.js";import{l as F,e as te,f as ae,t as O,g as t,p as se,a as re,s as r,m as g,b as o,c as n,r as c,u as w,d as V}from"./runtime.3ZiL6AbN.js";import{f as Q,e as M,a as q,s as A}from"./render.brZyvLxj.js";import{e as le,i as ie}from"./each.B29bUDJO.js";import{r as D,i as G,s as H}from"./translation.Bs2K9wjt.js";import{b as J}from"./input.Bf9JF7Cj.js";import{I as N}from"./zh_CN.BkAviufo.js";import{I as x}from"./Icon.C6xzv7xA.js";/* empty css                        */var oe=Q(`<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block
       rounded-xl text-lg px-3 py-2 hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)]"><div class="transition text-90 inline-flex font-bold group-hover:text-[var(--primary)]"> <!></div> <div class="transition text-sm text-50"> </div></a>`),ne=Q(`<div id="search-bar" class="hidden lg:flex transition-all items-center h-11 mr-2 rounded-lg
      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
"><!> <input class="transition-all pl-10 text-sm bg-transparent outline-0
         h-full w-40 active:w-60 focus:w-60 text-black/50 dark:text-white/50 svelte-1wah7ro"/></div> <button aria-label="Search Panel" id="search-switch" class="btn-plain scale-animation lg:!hidden rounded-lg w-11 h-11 active:scale-90"><!></button> <div id="search-panel" class="float-panel float-panel-closed search-panel absolute md:w-[30rem]
top-20 left-4 md:left-[unset] right-4 shadow-2xl rounded-2xl p-2 svelte-1wah7ro"><div id="search-bar-inside" class="flex relative lg:hidden transition-all items-center h-11 rounded-xl
      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
  "><!> <input placeholder="Search" class="pl-10 absolute inset-0 text-sm bg-transparent outline-0
               focus:w-60 text-black/50 dark:text-white/50 svelte-1wah7ro"/></div> <!></div>`,1);function ge(R,U){re(U,!1);let i=g(""),d=g(""),f=g([]),h=g(!1),E=[],u=!1,y=null;const W=()=>{const e=document.getElementById("search-panel");e&&(e.classList.contains("float-panel-closed")?(e.classList.remove("float-panel-closed"),u=!0):(e.classList.add("float-panel-closed"),u=!1))},_=(e,a)=>{if(!a)return;const s=document.getElementById("search-panel");s&&(e&&!u?(s.classList.remove("float-panel-closed"),u=!0):!e&&u&&(s.classList.add("float-panel-closed"),u=!1))},P=(e,a)=>{if(!e){_(!1,a),r(f,[]);return}if(t(h))try{const s=e.toLowerCase();r(f,E.filter(l=>{const m=l.title.toLowerCase().includes(s),I=l.category&&l.category.toLowerCase().includes(s),b=l.tags.some(C=>C.toLowerCase().includes(s));return m||I||b})),_(t(f).length>0,a)}catch{r(f,[]),_(!1,a)}finally{}},S=(e,a)=>{y&&clearTimeout(y),y=setTimeout(()=>{P(e,a)},200)};Z(async()=>{try{const e=await fetch("/search-data.json");if(e.ok)E=await e.json(),r(h,!0);else throw new Error(`Failed to load search data: ${e.status} ${e.statusText}`)}catch{}}),F(()=>(t(h),t(i)),()=>{t(h)&&t(i)&&S(t(i),!0)}),F(()=>(t(h),t(d)),()=>{t(h)&&t(d)&&S(t(d),!1)}),te(),ee();var T=ne(),k=ae(T),B=n(k);x(B,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var p=o(B,2);D(p),c(k);var v=o(k,2),X=n(v);x(X,{icon:"material-symbols:search",class:"text-[1.25rem]"}),c(v);var j=o(v,2),L=n(j),K=n(L);x(K,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var $=o(K,2);D($),c(L);var Y=o(L,2);le(Y,1,()=>t(f),ie,(e,a)=>{var s=oe(),l=n(s),m=n(l,!0),I=o(m);x(I,{icon:"fa6-solid:chevron-right",class:"transition text-[0.75rem] translate-x-1 my-auto text-[var(--primary)]"}),c(l);var b=o(l,2),C=n(b,!0);c(b),c(s),O(()=>{H(s,"href",(t(a),w(()=>t(a).url))),A(m,(t(a),w(()=>t(a).title))),A(C,(t(a),w(()=>t(a).description)))}),M("click",s,()=>{r(i,""),r(d,""),r(f,[]);const z=document.getElementById("search-panel");z&&z.classList.add("float-panel-closed")}),q(e,s)}),c(j),O(e=>H(p,"placeholder",e),[()=>(V(G),V(N),w(()=>G(N.search)))]),J(p,()=>t(i),e=>r(i,e)),M("focus",p,()=>P(t(i),!0)),M("click",v,W),J($,()=>t(d),e=>r(d,e)),q(R,T),se()}export{ge as default};
